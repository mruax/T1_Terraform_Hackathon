# üöÄ Terraform Log Viewer

Advanced Terraform log analysis system with plugin architecture, database persistence, monitoring integration, and interactive Gantt visualization.

![Python](https://img.shields.io/badge/python-3.11-green)
![FastAPI](https://img.shields.io/badge/fastapi-0.118-teal)
![PostgreSQL](https://img.shields.io/badge/postgresql-15-blue)

## Features

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫** - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–∫–∞—Ç—å –ø–æ –ø—Ä–æ—Å—Ç—ã–º –∑–∞–ø—Ä–æ—Å–∞–º, –ø–æ–ª—è–º –∏–ª–∏ regexp-–≤—ã—Ä–∞–∂–µ–Ω–∏—è–º
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –ì–∞–Ω—Ç–∞** - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π Terraform –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –ª–æ–≥–æ–≤ –≤ PostgreSQL
- **–°–∏—Å—Ç–µ–º–∞ gRPC –ø–ª–∞–≥–∏–Ω–æ–≤** - –ú–æ–¥—É–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤ (5 –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤)
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–∫–≤–∏–∑–∏—Ç—ã
- Docker & Docker Compose
- 4GB RAM

### –ó–∞–ø—É—Å–∫

1. **–°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**

```bash
git clone https://github.com/mruax/T1_Terraform_Hackathon
cd T1_Terraform_Hackathon
```

2. **–ó–∞–ø—É—Å–∫ docker compose**

```bash
docker compose up --build
```

3. **–î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É**

–û—Ç–∫—Ä—ã—Ç—å UI –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000`

### –ü–µ—Ä–≤—ã–µ —à–∞–≥–∏

1. –ù–∞–∂–º–∏—Ç–µ "Drop log file here" –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ Terraform log —Ñ–∞–π–ª –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
2. –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∞—Ä—à–µ–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ **Logs**
3. –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤ Terraform –æ–ø–µ—Ä–∞—Ü–∏–π –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Gantt Chart**
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–µ—Ä–≤–∏—Å–∞ –º–æ–∂–Ω–æ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ **Monitoring**

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–µ–± –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

#### –õ–æ–≥–∏
- **–ó–∞–≥—Ä—É–∑–∫–∞**: –í—ã–±—Ä–∞–Ω–Ω—ã–π `.json` —Ñ–∞–π–ª –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏–ª–∏ –Ω–∞–∂–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É –∑–∞–≥—Ä—É–∑–∫–∏
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É, —Ñ–∏–ª—å—Ç—Ä–∞–º, regex –∏–ª–∏ —É—Ä–æ–≤–Ω—è–º –ª–æ–≥–æ–≤ (TRACE/DEBUG/INFO/WARN/ERROR/FATAL)
- **–ü—Ä–æ—á—Ç–µ–Ω–Ω—ã–µ/–Ω–µ–ø—Ä–æ—á—Ç–µ–Ω–Ω—ã–µ**: –ü–æ–º–µ—Ç–∏—Ç—å –ª–æ–≥–∏ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ/–Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ –∏ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –∏—Ö —Å—Ç–∞—Ç—É—Å—É –ø—Ä–æ—á—Ç–µ–Ω–∏—è
- **–í—ã–±–æ—Ä –ª–æ–≥–æ–≤**: –õ–µ–≤—ã–π sidebar –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤

#### –î–∏–∞–≥—Ä–∞–º–º–∞ –ì–∞–Ω—Ç–∞
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª—ã**: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è Terraform –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –æ–ø–µ—Ä–∞—Ü–∏—è–º**: –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –∏—Ö –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**: –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—é –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–ø–µ—Ä–∞—Ü–∏–∏

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–î–µ—à–±–æ—Ä–¥ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏**: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤, –æ—à–∏–±–∫–∏, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, health status
- **–ì—Ä–∞—Ñ–∏–∫**: –í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ–≤ —Å —Ç–µ—á–µ–Ω–∏–µ–º –≤—Ä–µ–º–µ–Ω–∏

### API Usage

–û–ø–∏—Å–∞–Ω–∏–µ –∞–ø–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å TODO: 123 `http://localhost:8000/docs`

## –ü–ª–∞–≥–∏–Ω—ã

### 1. SensitiveDataPlugin
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.

**–û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç:**
- –¢–æ–∫–µ–Ω—ã –∏ –∫–ª—é—á–∏ API
- –ü–∞—Ä–æ–ª–∏
- Bearer tokens
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ö–ª—é—á–∏ AWS
- –¢–æ–∫–µ–Ω—ã JWT

### 2. FieldFilterPlugin
–í–∫–ª—é—á–µ–Ω–∏–µ –∏–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π –∏–∑ –ª–æ–≥–æ–≤.

### 3. LogLevelFilterPlugin
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–æ–≥–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—é.

### 4. NoiseFilterPlugin
–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è/—à—É–º–Ω—ã—Ö —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤.

### 5. HTTPBodyCompressionPlugin
–°–∂–∞—Ç–∏–µ –±–æ–ª—å—à–∏—Ö HTTP —Ç–µ–ª –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤.

## –°—Ö–µ–º–∞ –ë–î

### log_files
```sql
CREATE TABLE log_files (
    id SERIAL PRIMARY KEY,
    filename VARCHAR(255) NOT NULL,
    upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    total_entries INTEGER,
    error_count INTEGER,
    warn_count INTEGER,
    metadata JSONB
);
```

### log_entries
```sql
CREATE TABLE log_entries (
    id SERIAL PRIMARY KEY,
    file_id INTEGER REFERENCES log_files(id) ON DELETE CASCADE,
    timestamp TIMESTAMP,
    level VARCHAR(10),
    message TEXT,
    raw_json JSONB,
    section_type VARCHAR(50),
    req_id VARCHAR(100)
);
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# Database URL
DATABASE_URL=postgresql://terraform:terraform@postgres:5432/terraform_logs

# API Settings
HOST=0.0.0.0
PORT=8000
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API

–í–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

### Prometheus

```yaml
scrape_configs:
  - job_name: 'terraform-logs'
    metrics_path: '/api/v1/health'
    static_configs:
      - targets: ['localhost:8000']
```

### Grafana

–°–æ–∑–¥–∞—Ç—å JSON API data source –Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–π –Ω–∞:
```
http://localhost:8000/api/v1/metrics
```

### PagerDuty

```python
import requests

alerts = requests.get("http://localhost:8000/api/v1/alerts?severity=ERROR").json()

for alert in alerts['alerts']:
    pagerduty_create_incident(
        title=f"Terraform Error: {alert['message']}",
        details=alert
    )
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
# Install dependencies
pip install -r requirements.txt

# Start PostgreSQL
docker run -d -p 5432:5432 \
  -e POSTGRES_USER=terraform \
  -e POSTGRES_PASSWORD=terraform \
  -e POSTGRES_DB=terraform_logs \
  postgres:15-alpine

# Run the application
uvicorn terraform_log_parser:app --reload
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–ª–∞–≥–∏–Ω–æ–≤

```python
from terraform_log_parser import LogPlugin, LogEntry

class CustomPlugin(LogPlugin):
    def process_json(self, json_obj):
        # Modify JSON before parsing
        return json_obj
    
    def process_entry(self, entry: LogEntry):
        # Modify or filter parsed entry
        return entry

# Use it
parser = TerraformLogParser(plugins=[CustomPlugin()])
```

## –°–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `compress_bodies=true` –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —Ç–µ–ª HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
2. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ `min_level=INFO` –∏ `remove_noise=true` –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —à—É–º–∞
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ–ª–µ–π –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∏—Å–∫–∞ –¥–∞–Ω–Ω—ã—Ö

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **–í—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–∞–π—Ç–µ** `redact_sensitive` –≤ production —Å—Ä–µ–¥–µ
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã** –¥–ª—è —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
3. **–í–∫–ª—é—á–∏—Ç–µ HTTPS** –¥–ª—è production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–π
4. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ API** —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏
5. **–†–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL

## –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ

1. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. –£–ª—É—á—à–µ–Ω–Ω—ã–π ui, –±–æ–ª—å—à–µ –≤–∏–¥–æ–≤ –¥–∏–∞–≥—Ä–∞–º–º –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π –ø–æ–∏—Å–∫–æ–≤–æ–π –¥–≤–∏–∂–æ–∫

---

–° —É–≤–∞–∂–µ–Ω–∏–µ–º, –∫–æ–º–∞–Ω–¥–∞ **–ü–æ–∑–≤–æ–Ω–æ—á–Ω–∏–∫ ‚ñ∫ –í–µ–∂–ª–∏–≤–æ—Å—Ç—å**
